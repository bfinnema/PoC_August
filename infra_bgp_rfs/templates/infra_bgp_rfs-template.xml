<config-template xmlns="http://tail-f.com/ns/config/1.0">
  <devices xmlns="http://tail-f.com/ns/ncs">
    <device>
      <name>{$DEVICE}</name>
      <config>
        <router xmlns="http://cisco.com/ns/yang/Cisco-IOS-XR-um-router-bgp-cfg">
          <bgp>
            <instances>
              <instance>
                <instance-name>{$BGP_AS}</instance-name>
                <as>
                  <as-number>{$BGP_AS}</as-number>
                  <address-families>
                    <address-family>
                      <af-name>ipv4-unicast</af-name>
                    </address-family>
                    <address-family>
                      <af-name>vpnv4-unicast</af-name>
                    </address-family>
                  </address-families>
                  <neighbors>
                    <neighbor>
                      <neighbor-address>{$RR1_IPV4_ADDRESS}</neighbor-address>
                      <address-families>
                        <address-family>
                          <af-name>ipv4-unicast</af-name>
                        </address-family>
                        <address-family>
                          <af-name>vpnv4-unicast</af-name>
                        </address-family>
                      </address-families>
                      <remote-as>{$BGP_AS}</remote-as>
                      <update-source>Loopback0</update-source>
                    </neighbor>
                    <neighbor>
                      <neighbor-address>{$RR2_IPV4_ADDRESS}</neighbor-address>
                      <address-families>
                        <address-family>
                          <af-name>ipv4-unicast</af-name>
                        </address-family>
                        <address-family>
                          <af-name>vpnv4-unicast</af-name>
                        </address-family>
                      </address-families>
                      <remote-as>{$BGP_AS}</remote-as>
                      <update-source>Loopback0</update-source>
                    </neighbor>
                  </neighbors>
                  <bgp>
                    <router-id>{$BGP_ROUTER_ID}</router-id>
                  </bgp>
                </as>
              </instance>
            </instances>
          </bgp>
        </router>
        <router xmlns="http://tail-f.com/ned/cisco-ios-xr">
          <bgp>
            <bgp-no-instance>
              <id>{$BGP_AS}</id>
              <bgp>
                <router-id>{$BGP_ROUTER_ID}</router-id>
              </bgp>
              <address-family>
                <ipv4>
                  <unicast/>
                </ipv4>
                <vpnv4>
                  <unicast/>
                </vpnv4>
              </address-family>
              <neighbor>
                <id>{$RR1_IPV4_ADDRESS}</id>
                <remote-as>{$BGP_AS}</remote-as>
                <update-source>
                  <Loopback>0</Loopback>
                </update-source>
                <address-family>
                  <ipv4>
                    <unicast/>
                  </ipv4>
                  <vpnv4>
                    <unicast/>
                  </vpnv4>
                </address-family>
              </neighbor>
              <neighbor>
                <id>{$RR2_IPV4_ADDRESS}</id>
                <remote-as>{$BGP_AS}</remote-as>
                <update-source>
                  <Loopback>0</Loopback>
                </update-source>
                <address-family>
                  <ipv4>
                    <unicast/>
                  </ipv4>
                  <vpnv4>
                    <unicast/>
                  </vpnv4>
                </address-family>
              </neighbor>
            </bgp-no-instance>
          </bgp>
        </router>
      </config>
    </device>
  </devices>
</config-template>
